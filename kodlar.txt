const Discord = require('discord.js');
const client = new Discord.Client();
const iÅŸaret = require('./iÅŸaret.json');
const hedefim = require('./hedef.json');
const {Client, MessageEmbed } = require('discord.js');

var prefix = iÅŸaret.prefix
var hedef = hedefim.hedef

client.on("guildMemberAdd", member => {
  try {
    const Counter = member.guild;
  Counter.setName(`Amine Oyunu (${member.guild.memberCount}/${hedef})`);
}
catch (e) {
  console.log(e);
}
}); //sunucu ismi deÄŸiÅŸtiren counter +

client.on("guildMemberRemove", member => {
  try {
    const Counter = member.guild;
  Counter.setName(`Amine Oyunu (${member.guild.memberCount}/${hedef})`);
}
catch (e) {
  console.log(e);
}
}); //sunucu ismi deÄŸiÅŸtiren counter -

client.on("guildMemberAdd", member => {
  try {
    const Counter = member.guild.channels.cache.find(channel => channel.id === '835981653179367425');
  Counter.setName(`Ãœye SayÄ±sÄ±: ${member.guild.memberCount}`);
}
catch (e) {
  console.log(e);
}
}); //Kanal ismi deÄŸiÅŸtiren counter +

client.on("guildMemberRemove", member => {
  try {
    const Counter = member.guild.channels.cache.find(channel => channel.id === '835981653179367425');
  Counter.setName(`Ãœye SayÄ±sÄ±: ${member.guild.memberCount}`);
}
catch (e) {
  console.log(e);
}
}); //Kanal ismi deÄŸiÅŸtiren counter -

client.on('guildMemberAdd', member => {
  const hoÅŸgeldin = member.guild.channels.cache.find(channel => channel.name === 'Ã¼ye-sayaÃ§');
  hoÅŸgeldin.send(`${member} sunucumuza katÄ±ldÄ±. Ãœye sayÄ±mÄ±z ${member.guild.memberCount}, Ã¼ye hedefimiz ${hedef}`);

}); //HoÅŸgeldin MesajÄ± member counter +

client.on('guildMemberRemove', member => {
  const hoÅŸgeldin = member.guild.channels.cache.find(channel => channel.name === 'Ã¼ye-sayaÃ§');
  hoÅŸgeldin.send(`${member} sunucumuzdan ayrÄ±ldÄ±. Ãœye sayÄ±mÄ±z ${member.guild.memberCount} oldu. Ãœye hedefimiz ${member.guild.memberCount}/${hedef}`);

}); //HoÅŸgeldin MesajÄ± member counter -

client.on('message', msg => {
  if (msg.content.toLowerCase() === 'embed') {
    const kanal = new MessageEmbed()

    .setTitle("Bu bir baÅŸlÄ±ktÄ±r")//baÅŸlÄ±k ayarlar
    .setDescription("Bu bir aÃ§Ä±klamadÄ±r")//aÃ§Ä±klama ayarlar
    .setAuthor("Challenge Bot Deneme")//mesaj sahibini ayarlar
    .setColor("RANDOM")//rengi ayarlar PINK yazarsan pembe BLUE yazarsan mavi
    .setThumbnail("https://media.discordapp.net/attachments/832525052452667403/835594755681026148/unknown.png")//resmi ayarlar
    .addField(":joy: ", "Burada mesaj yazÄ±yor");//mesajlar yazar
    msg.channel.send(kanal);
  }
}); //embed mesaj

client.on('ready', () => {
  console.log(`Logged in as ${client.user.tag}!`);
  client.user.setActivity('ZAAAAA xd', { type: 'PLAYING'})
  .then(presence => console.log(`Durum ${presence.activities[0].name} oldu.`))
  .catch(console.error);
}); //aktivite ayarÄ±

 client.on('guildMemberAdd', member => {
   const hoÅŸgeldin = member.guild.channels.cache.find(channel => channel.name === 'hoÅŸgeldin');
   hoÅŸgeldin.send(`HoÅŸgeldin, ${member}`);
  // member.send(`${member} Sunucumuza HoÅŸgeldin.`) Ã–zelden hoÅŸgeldin mesajÄ± atar.
}); //HoÅŸgeldin MesajÄ±

  client.on('guildMemberRemove', member => {
  const hoÅŸgeldin = member.guild.channels.cache.find(channel => channel.name === 'hoÅŸgeldin');
  hoÅŸgeldin.send(`${member}, sunucumuzdan ayrÄ±ldÄ±.`);
}); //Sunucudan ayrÄ±ldÄ± MesajÄ±

client.on('message', msg => {
  if (msg.content.toLowerCase() === 'napim') {
    msg.channel.send('gÃ¶tÃ¼nÃ¼ sikim');
  }
}); //prefixsiz yanÄ±t

client.on('message', msg => {
  if (msg.content.toLowerCase() === '31') {
    msg.author.send('bu Ã§ok komikti sjsjjssj');
  }
}); //Ã¶zelden mesaj

client.on('message', msg => {
  if (msg.content.toLowerCase() === prefix + 'ching') {
    msg.channel.send('Ching Chong Welcome to China');
  }
}); //prefixli yanÄ±t

client.on('message', msg => {
  if (msg.content.toLowerCase() === 'za') {
    msg.delete()
    msg.channel.send('Bu kelime yasaklÄ±');
  }
}); //yasaklÄ± kelimeyi silme

client.on('message', msg => {
  if (msg.content.toLowerCase() === 'nice bot') {
    msg.react("ğŸ˜„")
    msg.channel.send('saÄŸ ol');
  }
}); //nice bot

client.on('message', msg => {
  if (msg.content.toLowerCase() === 'bad bot') {
    msg.react("ğŸ˜­")
    msg.channel.send('Ã¶zÃ¼r dilerim');
  }
}); //bad bot

client.on('message', message => {
  if (!message.guild) return;
  if (message.content.startsWith('!kick')) {
    if(!message.member.hasPermission("ADMINISTRATOR")) return message.channel.send(`Bu komutu kullanmaya yetkin yok.`)
    const user = message.mentions.users.first();
    if (user) {
      const member = message.guild.member(user);
      if (member) {
        member
          .kick()
          .then(() => {
            const log = message.guild.channels.cache.find(channel => channel.name === 'log-channel')
            message.reply(`adlÄ± kullanÄ±cÄ± ${user.tag} kullanÄ±cÄ±sÄ±nÄ± sunucudan atmÄ±ÅŸtÄ±r.`);
          })
          .catch(err => {
            message.reply('Bu kullanÄ±cÄ±yÄ± atmak iÃ§in yetkim yok.');
            console.error(err);
          });
      } else {
        message.reply("KullanÄ±cÄ± bu serverda bulunmamaktadÄ±r.");
      }
    } else {
      message.reply("Kicklenecek kiÅŸiyi belirtmediniz.");
    }
  }
}); //Kick komutu

client.on('message', message => {
  if (!message.guild) return;
  if (message.content.startsWith('!ban')) {
    if(!message.member.hasPermission("ADMINISTRATOR")) return message.channel.send(`Bu komutu kullanmaya yetkin yok.`)
    const user = message.mentions.users.first();
    if (user) {
      const member = message.guild.member(user);
      if (member) {
        member
          .ban()
          .then(() => {
            const log = message.guild.channels.cache.find(channel => channel.name === 'log-channel')
            message.reply(`adlÄ± kullanÄ±cÄ± ${user.tag} kullanÄ±cÄ±sÄ±nÄ± sunucudan banlamÄ±ÅŸtÄ±r.`);
          })
          .catch(err => {
            message.reply('Bu kullanÄ±cÄ±yÄ± atmak iÃ§in yetkim yok.');
            console.error(err);
          });
      } else {
        message.reply("KullanÄ±cÄ± bu serverda bulunmamaktadÄ±r.");
      }
    } else {
      message.reply("Banlanacak kiÅŸiyi belirtmediniz.");
    }
  }
}); //Ban komutu

client.on("guildMemberAdd", member => {
  try {
  let role = member.guild.roles.cache.find(role => role.name === 'Yeni Ã¼ye')
  member.roles.add(role);
} catch(e) {
  console.log(e);
}
}); //yeni Ã¼ye rolÃ¼

client.on("message", message => {
  if (message.content.startsWith('!rolver')) {
    if(!message.member.hasPermission("ADMINISTRATOR")) return message.channel.send(`Bu komutu kullanmaya yetkin yok.`)
    let role = message.mentions.roles.first();
    let member = message.mentions.members.first();
    member.roles.add(role)
  }
}); //rol ekleme komutu

client.on("message", message => {
  if (message.content.startsWith('!oylama')){
    const args = message.content.split(' ').slice(1)
    const botmesajÄ± = args.join(" ")
    if (!message.member.hasPermission('ADMINISTRATOR')) return message.reply('Oylama yapmak iÃ§in **yÃ¶netici** olmanÄ±z gerekmektedir.');
    if (!botmesajÄ±) return message.reply('OylamanÄ±n ne olacaÄŸÄ±nÄ± yazmadÄ±nÄ±z.');
    message.delete(message.author)
    const embed = new MessageEmbed()
    .setTitle('OYLAMA')
    .setDescription(botmesajÄ±)
    .setFooter('Challenge Botu');
    message.channel.send({ embed: embed }).then( embedMessage => {
      embedMessage.react("ğŸ‘")
      embedMessage.react("ğŸ‘");
    })
  }
}); //Oylama komutu

client.on('message', message =>{
  if (message.content.startsWith('!duyuru')) {
    const kanal = message.mentions.channels.first();
    const args = message.content.split(' ').slice(2)
    const botmesajÄ± = args.join(" ")
    if (!message.member.hasPermission('ADMINISTRATOR')) return message.reply('Duyuru yapmak iÃ§in **yÃ¶netici** olmanÄ±z gerekmektedir.');
    if (!botmesajÄ±) return message.reply('Neyi duyuracaÄŸÄ±nÄ±zÄ± yazmadÄ±nÄ±z.');
    if (!kanal) return message.reply('Duyurunun yapÄ±lacaÄŸÄ± kanalÄ± belirtmediniz.');
    message.delete(message.author)
    kanal.send(botmesajÄ±);
  }
}); //Duyuru komutu

client.on('message', message => {
  if (message.content.startsWith('!dmduyuru')) {
    const kiÅŸi = message.mentions.users.first();
    const args = message.content.split(' ').slice(2)
    const botmesajÄ± = args.join(" ")
    if (!message.member.hasPermission('ADMINISTRATOR')) return message.reply('Duyuru yapmak iÃ§in **yÃ¶netici** olmanÄ±z gerekmektedir.');
    if (!botmesajÄ±) return message.reply('Neyi duyuracaÄŸÄ±nÄ±zÄ± yazmadÄ±nÄ±z.');
    if (!kiÅŸi) return message.reply('Duyurunun yapÄ±lacaÄŸÄ± kiÅŸiyi seÃ§mediniz.');
    message.delete(message.author)
    kiÅŸi.send(botmesajÄ±);
  }
}); //dm duyuru komutu

client.on('message', message => {
  if (message.content.toLowerCase() === '!kiss') {
    var Kiss1 = [
      'https://media.giphy.com/media/G3va31oEEnIkM/giphy.gif',
      'https://media.giphy.com/media/zkppEMFvRX5FC/giphy.gif'
    ];
    var sendÃ¶pÃ¼cÃ¼k1 = Math.floor(Math.random()*Kiss1.length);
    const embed = new MessageEmbed()
    .setTitle('Ã–pÃ¼cÃ¼k')
    .addField('1. Deneme', `${Kiss1[sendÃ¶pÃ¼cÃ¼k1]}`)
    .setImage(`${Kiss1[sendÃ¶pÃ¼cÃ¼k1]}`)
    message.channel.send(embed);
  }
}); //kiss bot

client.on('message',message => {
if (message.content.toLowerCase() === '!random') {
  var Cevap1 = [
     'hÄ±mmm bilemedim',
     'olabilir'
   ];
   var Cevap2 = [
    'evet',
    'hayÄ±r',
    'neden'
];
    var Cevap1doÄŸru = Math.floor(Math.random()*Cevap1.length);
    var Cevap2doÄŸru = Math.floor(Math.random()*Cevap2.length);
    const embed = new MessageEmbed()
      .setTitle('cevaplar')
      .addField('1.cevap',`${Cevap1[Cevap1doÄŸru]}`)
      .addField('2.cevap',`${Cevap2[Cevap2doÄŸru]}`);
      message.channel.send(embed);
 }
}); //randomizer template

client.on('message',message => {
if (message.content.toLowerCase() === '!turnuva') {
  var KÃ¼me1 = [
     'Ã–mer',
     'HÄ±zÄ±r'
   ];
   var KÃ¼me2 = [
    'Enes',
    'Arda'
];
    var kÃ¼mekazanan1 = Math.floor(Math.random()*KÃ¼me1.length);
    var kÃ¼mekazanan2 = Math.floor(Math.random()*KÃ¼me2.length);
    var Åampiyon = [
      `${KÃ¼me1[kÃ¼mekazanan1]}`,
      `${KÃ¼me2[kÃ¼mekazanan2]}`
    ];

    var ÅŸampiyon = Math.floor(Math.random()*Åampiyon.length);

    const embed = new MessageEmbed()
      .setTitle('cevaplar')
      .addField('1. Kazanan',`${KÃ¼me1[kÃ¼mekazanan1]}`)
      .addField('2. Kazanan',`${KÃ¼me2[kÃ¼mekazanan2]}`)
      .addField('Åampiyon', `${Åampiyon[ÅŸampiyon]}`);
      message.channel.send(embed);
 }
}); //randomizer turnuva

client.on('message', async message => {
  if (message.content.startsWith('!play')) {
    const args = message.content.split(' ').slice(1)
    const botmesajÄ± = args.join(" ")
    if (!botmesajÄ±) return message.reply('Bir link atmadÄ±nÄ±z.')
    if (message.member.voice.channel) {
      const connection = await message.member.voice.channel.join();
      const ytdl = require('ytdl-core');
      connection.play(ytdl(`${botmesajÄ±}`, { filter: 'audioonly'}))
    } else {
      message.reply('Bir sesli kanala katÄ±lÄ±n.');
    }
  }
}); //mÃ¼zik botu


client.login('ODM1NTc4OTA3MDQ5NTkwNzg1.YIRffw.YA0hSANQ6Zakmw3WHufUtvyFwLw');
